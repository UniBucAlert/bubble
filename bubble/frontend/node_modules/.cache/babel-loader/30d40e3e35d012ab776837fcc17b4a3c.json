{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React, { useCallback, useEffect, useRef, useState, useMemo, isValidElement } from 'react';\nimport Downshift from 'downshift';\nimport get from 'lodash/get';\nimport classNames from 'classnames';\nimport { TextField, InputAdornment, IconButton } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport { useInput, FieldTitle, useSuggestions, useTranslate, warning } from 'ra-core';\nimport InputHelperText from './InputHelperText';\nimport AutocompleteSuggestionList from './AutocompleteSuggestionList';\nimport AutocompleteSuggestionItem from './AutocompleteSuggestionItem';\nimport { AutocompleteInputLoader } from './AutocompleteInputLoader';\n/**\n * An Input component for an autocomplete field, using an array of objects for the options\n *\n * Pass possible options as an array of objects in the 'choices' attribute.\n *\n * By default, the options are built from:\n *  - the 'id' property as the option value,\n *  - the 'name' property as the option text\n * @example\n * const choices = [\n *    { id: 'M', name: 'Male' },\n *    { id: 'F', name: 'Female' },\n * ];\n * <AutocompleteInput source=\"gender\" choices={choices} />\n *\n * You can also customize the properties to use for the option name and value,\n * thanks to the 'optionText' and 'optionValue' attributes.\n * @example\n * const choices = [\n *    { _id: 123, full_name: 'Leo Tolstoi', sex: 'M' },\n *    { _id: 456, full_name: 'Jane Austen', sex: 'F' },\n * ];\n * <AutocompleteInput source=\"author_id\" choices={choices} optionText=\"full_name\" optionValue=\"_id\" />\n *\n * `optionText` also accepts a function, so you can shape the option text at will:\n * @example\n * const choices = [\n *    { id: 123, first_name: 'Leo', last_name: 'Tolstoi' },\n *    { id: 456, first_name: 'Jane', last_name: 'Austen' },\n * ];\n * const optionRenderer = choice => `${choice.first_name} ${choice.last_name}`;\n * <AutocompleteInput source=\"author_id\" choices={choices} optionText={optionRenderer} />\n *\n * `optionText` also accepts a React Element, that will be cloned and receive\n * the related choice as the `record` prop. You can use Field components there.\n * Note that you must also specify the `matchSuggestion` prop\n * @example\n * const choices = [\n *    { id: 123, first_name: 'Leo', last_name: 'Tolstoi' },\n *    { id: 456, first_name: 'Jane', last_name: 'Austen' },\n * ];\n * const matchSuggestion = (filterValue, choice) => choice.first_name.match(filterValue) || choice.last_name.match(filterValue);\n * const FullNameField = ({ record }) => <span>{record.first_name} {record.last_name}</span>;\n * <SelectInput source=\"gender\" choices={choices} optionText={<FullNameField />} matchSuggestion={matchSuggestion} />\n *\n * The choices are translated by default, so you can use translation identifiers as choices:\n * @example\n * const choices = [\n *    { id: 'M', name: 'myroot.gender.male' },\n *    { id: 'F', name: 'myroot.gender.female' },\n * ];\n *\n * However, in some cases (e.g. inside a `<ReferenceInput>`), you may not want\n * the choice to be translated. In that case, set the `translateChoice` prop to false.\n * @example\n * <AutocompleteInput source=\"gender\" choices={choices} translateChoice={false}/>\n *\n * The object passed as `options` props is passed to the material-ui <TextField> component\n *\n * @example\n * <AutocompleteInput source=\"author_id\" options={{ color: 'secondary', InputLabelProps: { shrink: true } }} />\n */\n\nvar AutocompleteInput = function (props) {\n  var allowEmpty = props.allowEmpty,\n      className = props.className,\n      classesOverride = props.classes,\n      clearAlwaysVisible = props.clearAlwaysVisible,\n      _a = props.choices,\n      choices = _a === void 0 ? [] : _a,\n      disabled = props.disabled,\n      emptyText = props.emptyText,\n      emptyValue = props.emptyValue,\n      format = props.format,\n      fullWidth = props.fullWidth,\n      helperText = props.helperText,\n      idOverride = props.id,\n      inputOverride = props.input,\n      isRequiredOverride = props.isRequired,\n      label = props.label,\n      limitChoicesToValue = props.limitChoicesToValue,\n      loaded = props.loaded,\n      loading = props.loading,\n      _b = props.margin,\n      margin = _b === void 0 ? 'dense' : _b,\n      matchSuggestion = props.matchSuggestion,\n      metaOverride = props.meta,\n      onBlur = props.onBlur,\n      onChange = props.onChange,\n      onFocus = props.onFocus,\n      _c = props.options,\n      _d = _c === void 0 ? {\n    suggestionsContainerProps: undefined,\n    labelProps: undefined,\n    InputProps: undefined\n  } : _c,\n      suggestionsContainerProps = _d.suggestionsContainerProps,\n      labelProps = _d.labelProps,\n      InputProps = _d.InputProps,\n      options = __rest(_d, [\"suggestionsContainerProps\", \"labelProps\", \"InputProps\"]),\n      _e = props.optionText,\n      optionText = _e === void 0 ? 'name' : _e,\n      inputText = props.inputText,\n      _f = props.optionValue,\n      optionValue = _f === void 0 ? 'id' : _f,\n      parse = props.parse,\n      resettable = props.resettable,\n      resource = props.resource,\n      setFilter = props.setFilter,\n      shouldRenderSuggestionsOverride = props.shouldRenderSuggestions,\n      source = props.source,\n      suggestionLimit = props.suggestionLimit,\n      _g = props.translateChoice,\n      translateChoice = _g === void 0 ? true : _g,\n      validate = props.validate,\n      _h = props.variant,\n      variant = _h === void 0 ? 'filled' : _h,\n      rest = __rest(props, [\"allowEmpty\", \"className\", \"classes\", \"clearAlwaysVisible\", \"choices\", \"disabled\", \"emptyText\", \"emptyValue\", \"format\", \"fullWidth\", \"helperText\", \"id\", \"input\", \"isRequired\", \"label\", \"limitChoicesToValue\", \"loaded\", \"loading\", \"margin\", \"matchSuggestion\", \"meta\", \"onBlur\", \"onChange\", \"onFocus\", \"options\", \"optionText\", \"inputText\", \"optionValue\", \"parse\", \"resettable\", \"resource\", \"setFilter\", \"shouldRenderSuggestions\", \"source\", \"suggestionLimit\", \"translateChoice\", \"validate\", \"variant\"]);\n\n  if (isValidElement(optionText) && !inputText) {\n    throw new Error(\"If the optionText prop is a React element, you must also specify the inputText prop:\\n        <AutocompleteInput\\n            inputText={(record) => record.title}\\n        />\");\n  }\n\n  warning(isValidElement(optionText) && !matchSuggestion, \"If the optionText prop is a React element, you must also specify the matchSuggestion prop:\\n<AutocompleteInput\\n    matchSuggestion={(filterValue, suggestion) => true}\\n/>\\n        \");\n  warning(source === undefined, \"If you're not wrapping the AutocompleteInput inside a ReferenceInput, you must provide the source prop\");\n  warning(choices === undefined, \"If you're not wrapping the AutocompleteInput inside a ReferenceInput, you must provide the choices prop\");\n  var classes = useStyles(props);\n  var inputEl = useRef();\n  var anchorEl = useRef();\n  var translate = useTranslate();\n\n  var _j = useInput(__assign({\n    format: format,\n    id: idOverride,\n    input: inputOverride,\n    meta: metaOverride,\n    onBlur: onBlur,\n    onChange: onChange,\n    onFocus: onFocus,\n    parse: parse,\n    resource: resource,\n    source: source,\n    validate: validate\n  }, rest)),\n      id = _j.id,\n      input = _j.input,\n      isRequired = _j.isRequired,\n      _k = _j.meta,\n      touched = _k.touched,\n      error = _k.error,\n      submitError = _k.submitError;\n\n  var _l = useState(''),\n      filterValue = _l[0],\n      setFilterValue = _l[1];\n\n  var getSuggestionFromValue = useCallback(function (value) {\n    return choices.find(function (choice) {\n      return get(choice, optionValue) === value;\n    });\n  }, [choices, optionValue]);\n  var selectedItem = useMemo(function () {\n    return getSuggestionFromValue(input.value) || null;\n  }, [input.value, getSuggestionFromValue]);\n\n  var _m = useSuggestions({\n    allowEmpty: allowEmpty,\n    choices: choices,\n    emptyText: emptyText,\n    emptyValue: emptyValue,\n    limitChoicesToValue: limitChoicesToValue,\n    matchSuggestion: matchSuggestion,\n    optionText: optionText,\n    optionValue: optionValue,\n    selectedItem: selectedItem,\n    suggestionLimit: suggestionLimit,\n    translateChoice: translateChoice\n  }),\n      getChoiceText = _m.getChoiceText,\n      getChoiceValue = _m.getChoiceValue,\n      getSuggestions = _m.getSuggestions;\n\n  var handleFilterChange = useCallback(function (eventOrValue) {\n    var event = eventOrValue;\n    var value = event.target ? event.target.value : eventOrValue;\n\n    if (setFilter) {\n      setFilter(value);\n    }\n  }, [setFilter]); // We must reset the filter every time the value changes to ensure we\n  // display at least some choices even if the input has a value.\n  // Otherwise, it would only display the currently selected one and the user\n  // would have to first clear the input before seeing any other choices\n\n  useEffect(function () {\n    handleFilterChange(''); // If we have a value, set the filter to its text so that\n    // Downshift displays it correctly\n\n    setFilterValue(typeof input.value === 'undefined' || input.value === null || selectedItem === null ? '' : inputText ? inputText(getChoiceText(selectedItem).props.record) : getChoiceText(selectedItem));\n  }, [input.value, handleFilterChange, selectedItem, getChoiceText, inputText]);\n  var handleChange = useCallback(function (item) {\n    if (getChoiceValue(item) == null && filterValue) {\n      setFilterValue('');\n    }\n\n    input.onChange(getChoiceValue(item));\n  }, [filterValue, getChoiceValue, input]); // This function ensures that the suggestion list stay aligned to the\n  // input element even if it moves (because user scrolled for example)\n\n  var updateAnchorEl = function () {\n    if (!inputEl.current) {\n      return;\n    }\n\n    var inputPosition = inputEl.current.getBoundingClientRect(); // It works by implementing a mock element providing the only method used\n    // by the PopOver component, getBoundingClientRect, which will return a\n    // position based on the input position\n\n    if (!anchorEl.current) {\n      anchorEl.current = {\n        getBoundingClientRect: function () {\n          return inputPosition;\n        }\n      };\n    } else {\n      var anchorPosition = anchorEl.current.getBoundingClientRect();\n\n      if (anchorPosition.x !== inputPosition.x || anchorPosition.y !== inputPosition.y) {\n        anchorEl.current = {\n          getBoundingClientRect: function () {\n            return inputPosition;\n          }\n        };\n      }\n    }\n  };\n\n  var storeInputRef = function (input) {\n    inputEl.current = input;\n    updateAnchorEl();\n  };\n\n  var handleBlur = useCallback(function (event) {\n    handleFilterChange(''); // If we had a value before, set the filter back to its text so that\n    // Downshift displays it correctly\n\n    setFilterValue(input.value ? inputText ? inputText(getChoiceText(selectedItem).props.record) : getChoiceText(selectedItem) : '');\n    input.onBlur(event);\n  }, [getChoiceText, handleFilterChange, input, inputText, selectedItem]);\n  var handleFocus = useCallback(function (openMenu) {\n    return function (event) {\n      openMenu(event);\n      input.onFocus(event);\n    };\n  }, [input]);\n\n  var shouldRenderSuggestions = function (val) {\n    if (shouldRenderSuggestionsOverride !== undefined && typeof shouldRenderSuggestionsOverride === 'function') {\n      return shouldRenderSuggestionsOverride(val);\n    }\n\n    return true;\n  };\n\n  var _o = InputProps || {},\n      endAdornment = _o.endAdornment,\n      InputPropsWithoutEndAdornment = __rest(_o, [\"endAdornment\"]);\n\n  var handleClickClearButton = useCallback(function (openMenu) {\n    return function (event) {\n      event.stopPropagation();\n      setFilterValue('');\n      input.onChange('');\n      openMenu(event);\n      input.onFocus(event);\n    };\n  }, [input]);\n\n  var getEndAdornment = function (openMenu) {\n    var _a;\n\n    if (!resettable) {\n      if (endAdornment) {\n        return endAdornment;\n      }\n\n      if (loading) {\n        return React.createElement(AutocompleteInputLoader, null);\n      }\n    } else if (!filterValue) {\n      var label_1 = translate('ra.action.clear_input_value');\n\n      if (clearAlwaysVisible) {\n        // show clear button, inactive\n        return React.createElement(InputAdornment, {\n          position: \"end\"\n        }, React.createElement(IconButton, {\n          className: classes.clearButton,\n          \"aria-label\": label_1,\n          title: label_1,\n          disableRipple: true,\n          disabled: true\n        }, React.createElement(ClearIcon, {\n          className: classNames(classes.clearIcon, classes.visibleClearIcon)\n        })), loading && React.createElement(AutocompleteInputLoader, null));\n      } else {\n        if (endAdornment) {\n          return endAdornment;\n        } else {\n          // show spacer\n          return React.createElement(InputAdornment, {\n            position: \"end\"\n          }, React.createElement(\"span\", {\n            className: classes.clearButton\n          }, \"\\u00A0\"), loading && React.createElement(AutocompleteInputLoader, null));\n        }\n      }\n    } else {\n      // show clear\n      var label_2 = translate('ra.action.clear_input_value');\n      return React.createElement(InputAdornment, {\n        position: \"end\"\n      }, React.createElement(IconButton, {\n        className: classes.clearButton,\n        \"aria-label\": label_2,\n        title: label_2,\n        disableRipple: true,\n        onClick: handleClickClearButton(openMenu),\n        onMouseDown: handleMouseDownClearButton,\n        disabled: disabled\n      }, React.createElement(ClearIcon, {\n        className: classNames(classes.clearIcon, (_a = {}, _a[classes.visibleClearIcon] = clearAlwaysVisible || filterValue, _a))\n      })), loading && React.createElement(AutocompleteInputLoader, null));\n    }\n  };\n\n  return React.createElement(Downshift, __assign({\n    inputValue: filterValue,\n    onChange: handleChange,\n    selectedItem: selectedItem,\n    itemToString: function (item) {\n      return getChoiceValue(item);\n    }\n  }, rest), function (_a) {\n    var getInputProps = _a.getInputProps,\n        getItemProps = _a.getItemProps,\n        getLabelProps = _a.getLabelProps,\n        getMenuProps = _a.getMenuProps,\n        isOpen = _a.isOpen,\n        highlightedIndex = _a.highlightedIndex,\n        openMenu = _a.openMenu;\n    var isMenuOpen = isOpen && shouldRenderSuggestions(filterValue);\n\n    var _b = getInputProps(__assign({\n      onBlur: handleBlur,\n      onFocus: handleFocus(openMenu)\n    }, InputProps)),\n        downshiftId = _b.id,\n        // We want to ignore this to correctly link our label and the input\n    value = _b.value,\n        onBlur = _b.onBlur,\n        onChange = _b.onChange,\n        onFocus = _b.onFocus,\n        ref = _b.ref,\n        size = _b.size,\n        color = _b.color,\n        inputProps = __rest(_b, [\"id\", \"value\", \"onBlur\", \"onChange\", \"onFocus\", \"ref\", \"size\", \"color\"]);\n\n    var suggestions = getSuggestions(filterValue);\n    return React.createElement(\"div\", {\n      className: classes.container\n    }, React.createElement(TextField, __assign({\n      id: id,\n      name: input.name,\n      InputProps: __assign({\n        inputRef: storeInputRef,\n        endAdornment: getEndAdornment(openMenu),\n        onBlur: onBlur,\n        onChange: function (event) {\n          handleFilterChange(event);\n          setFilterValue(event.target.value);\n          onChange(event);\n        },\n        onFocus: onFocus\n      }, InputPropsWithoutEndAdornment),\n      error: !!(touched && (error || submitError)),\n      label: React.createElement(FieldTitle, __assign({\n        label: label\n      }, labelProps, {\n        source: source,\n        resource: resource,\n        isRequired: typeof isRequiredOverride !== 'undefined' ? isRequiredOverride : isRequired\n      })),\n      InputLabelProps: getLabelProps({\n        htmlFor: id\n      }),\n      helperText: React.createElement(InputHelperText, {\n        touched: touched,\n        error: error || submitError,\n        helperText: helperText\n      }),\n      disabled: disabled,\n      variant: variant,\n      margin: margin,\n      fullWidth: fullWidth,\n      value: filterValue,\n      className: className,\n      size: size,\n      color: color\n    }, inputProps, options)), React.createElement(AutocompleteSuggestionList, {\n      isOpen: isMenuOpen,\n      menuProps: getMenuProps({}, // https://github.com/downshift-js/downshift/issues/235\n      {\n        suppressRefError: true\n      }),\n      inputEl: inputEl.current,\n      suggestionsContainerProps: suggestionsContainerProps,\n      className: classes.suggestionsContainer\n    }, suggestions.map(function (suggestion, index) {\n      return React.createElement(AutocompleteSuggestionItem, __assign({\n        key: getChoiceValue(suggestion),\n        suggestion: suggestion,\n        index: index,\n        highlightedIndex: highlightedIndex,\n        isSelected: input.value === getChoiceValue(suggestion),\n        filterValue: filterValue,\n        getSuggestionText: getChoiceText\n      }, getItemProps({\n        item: suggestion\n      })));\n    })));\n  });\n};\n\nvar handleMouseDownClearButton = function (event) {\n  event.preventDefault();\n};\n\nvar useStyles = makeStyles(function (theme) {\n  return {\n    container: {\n      flexGrow: 1,\n      position: 'relative'\n    },\n    clearIcon: {\n      height: 16,\n      width: 0\n    },\n    visibleClearIcon: {\n      width: 16\n    },\n    clearButton: {\n      height: 24,\n      width: 24,\n      padding: 0\n    },\n    selectAdornment: {\n      position: 'absolute',\n      right: 24\n    },\n    inputAdornedEnd: {\n      paddingRight: 0\n    },\n    suggestionsContainer: {\n      zIndex: theme.zIndex.modal\n    }\n  };\n}, {\n  name: 'RaAutocompleteInput'\n});\nexport default AutocompleteInput;","map":{"version":3,"sources":["/node_modules/ra-ui-materialui/esm/input/AutocompleteInput.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","React","useCallback","useEffect","useRef","useState","useMemo","isValidElement","Downshift","get","classNames","TextField","InputAdornment","IconButton","makeStyles","ClearIcon","useInput","FieldTitle","useSuggestions","useTranslate","warning","InputHelperText","AutocompleteSuggestionList","AutocompleteSuggestionItem","AutocompleteInputLoader","AutocompleteInput","props","allowEmpty","className","classesOverride","classes","clearAlwaysVisible","_a","choices","disabled","emptyText","emptyValue","format","fullWidth","helperText","idOverride","id","inputOverride","input","isRequiredOverride","isRequired","label","limitChoicesToValue","loaded","loading","_b","margin","matchSuggestion","metaOverride","meta","onBlur","onChange","onFocus","_c","options","_d","suggestionsContainerProps","undefined","labelProps","InputProps","_e","optionText","inputText","_f","optionValue","parse","resettable","resource","setFilter","shouldRenderSuggestionsOverride","shouldRenderSuggestions","source","suggestionLimit","_g","translateChoice","validate","_h","variant","rest","Error","useStyles","inputEl","anchorEl","translate","_j","_k","touched","error","submitError","_l","filterValue","setFilterValue","getSuggestionFromValue","value","find","choice","selectedItem","_m","getChoiceText","getChoiceValue","getSuggestions","handleFilterChange","eventOrValue","event","target","record","handleChange","item","updateAnchorEl","current","inputPosition","getBoundingClientRect","anchorPosition","x","y","storeInputRef","handleBlur","handleFocus","openMenu","val","_o","endAdornment","InputPropsWithoutEndAdornment","handleClickClearButton","stopPropagation","getEndAdornment","createElement","label_1","position","clearButton","title","disableRipple","clearIcon","visibleClearIcon","label_2","onClick","onMouseDown","handleMouseDownClearButton","inputValue","itemToString","getInputProps","getItemProps","getLabelProps","getMenuProps","isOpen","highlightedIndex","isMenuOpen","downshiftId","ref","size","color","inputProps","suggestions","container","name","inputRef","InputLabelProps","htmlFor","menuProps","suppressRefError","suggestionsContainer","map","suggestion","index","key","isSelected","getSuggestionText","preventDefault","theme","flexGrow","height","width","padding","selectAdornment","right","inputAdornedEnd","paddingRight","zIndex","modal"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useCallback, useEffect, useRef, useState, useMemo, isValidElement, } from 'react';\nimport Downshift from 'downshift';\nimport get from 'lodash/get';\nimport classNames from 'classnames';\nimport { TextField, InputAdornment, IconButton } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport { useInput, FieldTitle, useSuggestions, useTranslate, warning, } from 'ra-core';\nimport InputHelperText from './InputHelperText';\nimport AutocompleteSuggestionList from './AutocompleteSuggestionList';\nimport AutocompleteSuggestionItem from './AutocompleteSuggestionItem';\nimport { AutocompleteInputLoader } from './AutocompleteInputLoader';\n/**\n * An Input component for an autocomplete field, using an array of objects for the options\n *\n * Pass possible options as an array of objects in the 'choices' attribute.\n *\n * By default, the options are built from:\n *  - the 'id' property as the option value,\n *  - the 'name' property as the option text\n * @example\n * const choices = [\n *    { id: 'M', name: 'Male' },\n *    { id: 'F', name: 'Female' },\n * ];\n * <AutocompleteInput source=\"gender\" choices={choices} />\n *\n * You can also customize the properties to use for the option name and value,\n * thanks to the 'optionText' and 'optionValue' attributes.\n * @example\n * const choices = [\n *    { _id: 123, full_name: 'Leo Tolstoi', sex: 'M' },\n *    { _id: 456, full_name: 'Jane Austen', sex: 'F' },\n * ];\n * <AutocompleteInput source=\"author_id\" choices={choices} optionText=\"full_name\" optionValue=\"_id\" />\n *\n * `optionText` also accepts a function, so you can shape the option text at will:\n * @example\n * const choices = [\n *    { id: 123, first_name: 'Leo', last_name: 'Tolstoi' },\n *    { id: 456, first_name: 'Jane', last_name: 'Austen' },\n * ];\n * const optionRenderer = choice => `${choice.first_name} ${choice.last_name}`;\n * <AutocompleteInput source=\"author_id\" choices={choices} optionText={optionRenderer} />\n *\n * `optionText` also accepts a React Element, that will be cloned and receive\n * the related choice as the `record` prop. You can use Field components there.\n * Note that you must also specify the `matchSuggestion` prop\n * @example\n * const choices = [\n *    { id: 123, first_name: 'Leo', last_name: 'Tolstoi' },\n *    { id: 456, first_name: 'Jane', last_name: 'Austen' },\n * ];\n * const matchSuggestion = (filterValue, choice) => choice.first_name.match(filterValue) || choice.last_name.match(filterValue);\n * const FullNameField = ({ record }) => <span>{record.first_name} {record.last_name}</span>;\n * <SelectInput source=\"gender\" choices={choices} optionText={<FullNameField />} matchSuggestion={matchSuggestion} />\n *\n * The choices are translated by default, so you can use translation identifiers as choices:\n * @example\n * const choices = [\n *    { id: 'M', name: 'myroot.gender.male' },\n *    { id: 'F', name: 'myroot.gender.female' },\n * ];\n *\n * However, in some cases (e.g. inside a `<ReferenceInput>`), you may not want\n * the choice to be translated. In that case, set the `translateChoice` prop to false.\n * @example\n * <AutocompleteInput source=\"gender\" choices={choices} translateChoice={false}/>\n *\n * The object passed as `options` props is passed to the material-ui <TextField> component\n *\n * @example\n * <AutocompleteInput source=\"author_id\" options={{ color: 'secondary', InputLabelProps: { shrink: true } }} />\n */\nvar AutocompleteInput = function (props) {\n    var allowEmpty = props.allowEmpty, className = props.className, classesOverride = props.classes, clearAlwaysVisible = props.clearAlwaysVisible, _a = props.choices, choices = _a === void 0 ? [] : _a, disabled = props.disabled, emptyText = props.emptyText, emptyValue = props.emptyValue, format = props.format, fullWidth = props.fullWidth, helperText = props.helperText, idOverride = props.id, inputOverride = props.input, isRequiredOverride = props.isRequired, label = props.label, limitChoicesToValue = props.limitChoicesToValue, loaded = props.loaded, loading = props.loading, _b = props.margin, margin = _b === void 0 ? 'dense' : _b, matchSuggestion = props.matchSuggestion, metaOverride = props.meta, onBlur = props.onBlur, onChange = props.onChange, onFocus = props.onFocus, _c = props.options, _d = _c === void 0 ? {\n        suggestionsContainerProps: undefined,\n        labelProps: undefined,\n        InputProps: undefined,\n    } : _c, suggestionsContainerProps = _d.suggestionsContainerProps, labelProps = _d.labelProps, InputProps = _d.InputProps, options = __rest(_d, [\"suggestionsContainerProps\", \"labelProps\", \"InputProps\"]), _e = props.optionText, optionText = _e === void 0 ? 'name' : _e, inputText = props.inputText, _f = props.optionValue, optionValue = _f === void 0 ? 'id' : _f, parse = props.parse, resettable = props.resettable, resource = props.resource, setFilter = props.setFilter, shouldRenderSuggestionsOverride = props.shouldRenderSuggestions, source = props.source, suggestionLimit = props.suggestionLimit, _g = props.translateChoice, translateChoice = _g === void 0 ? true : _g, validate = props.validate, _h = props.variant, variant = _h === void 0 ? 'filled' : _h, rest = __rest(props, [\"allowEmpty\", \"className\", \"classes\", \"clearAlwaysVisible\", \"choices\", \"disabled\", \"emptyText\", \"emptyValue\", \"format\", \"fullWidth\", \"helperText\", \"id\", \"input\", \"isRequired\", \"label\", \"limitChoicesToValue\", \"loaded\", \"loading\", \"margin\", \"matchSuggestion\", \"meta\", \"onBlur\", \"onChange\", \"onFocus\", \"options\", \"optionText\", \"inputText\", \"optionValue\", \"parse\", \"resettable\", \"resource\", \"setFilter\", \"shouldRenderSuggestions\", \"source\", \"suggestionLimit\", \"translateChoice\", \"validate\", \"variant\"]);\n    if (isValidElement(optionText) && !inputText) {\n        throw new Error(\"If the optionText prop is a React element, you must also specify the inputText prop:\\n        <AutocompleteInput\\n            inputText={(record) => record.title}\\n        />\");\n    }\n    warning(isValidElement(optionText) && !matchSuggestion, \"If the optionText prop is a React element, you must also specify the matchSuggestion prop:\\n<AutocompleteInput\\n    matchSuggestion={(filterValue, suggestion) => true}\\n/>\\n        \");\n    warning(source === undefined, \"If you're not wrapping the AutocompleteInput inside a ReferenceInput, you must provide the source prop\");\n    warning(choices === undefined, \"If you're not wrapping the AutocompleteInput inside a ReferenceInput, you must provide the choices prop\");\n    var classes = useStyles(props);\n    var inputEl = useRef();\n    var anchorEl = useRef();\n    var translate = useTranslate();\n    var _j = useInput(__assign({ format: format, id: idOverride, input: inputOverride, meta: metaOverride, onBlur: onBlur,\n        onChange: onChange,\n        onFocus: onFocus,\n        parse: parse,\n        resource: resource,\n        source: source,\n        validate: validate }, rest)), id = _j.id, input = _j.input, isRequired = _j.isRequired, _k = _j.meta, touched = _k.touched, error = _k.error, submitError = _k.submitError;\n    var _l = useState(''), filterValue = _l[0], setFilterValue = _l[1];\n    var getSuggestionFromValue = useCallback(function (value) { return choices.find(function (choice) { return get(choice, optionValue) === value; }); }, [choices, optionValue]);\n    var selectedItem = useMemo(function () { return getSuggestionFromValue(input.value) || null; }, [input.value, getSuggestionFromValue]);\n    var _m = useSuggestions({\n        allowEmpty: allowEmpty,\n        choices: choices,\n        emptyText: emptyText,\n        emptyValue: emptyValue,\n        limitChoicesToValue: limitChoicesToValue,\n        matchSuggestion: matchSuggestion,\n        optionText: optionText,\n        optionValue: optionValue,\n        selectedItem: selectedItem,\n        suggestionLimit: suggestionLimit,\n        translateChoice: translateChoice,\n    }), getChoiceText = _m.getChoiceText, getChoiceValue = _m.getChoiceValue, getSuggestions = _m.getSuggestions;\n    var handleFilterChange = useCallback(function (eventOrValue) {\n        var event = eventOrValue;\n        var value = event.target\n            ? event.target.value\n            : eventOrValue;\n        if (setFilter) {\n            setFilter(value);\n        }\n    }, [setFilter]);\n    // We must reset the filter every time the value changes to ensure we\n    // display at least some choices even if the input has a value.\n    // Otherwise, it would only display the currently selected one and the user\n    // would have to first clear the input before seeing any other choices\n    useEffect(function () {\n        handleFilterChange('');\n        // If we have a value, set the filter to its text so that\n        // Downshift displays it correctly\n        setFilterValue(typeof input.value === 'undefined' ||\n            input.value === null ||\n            selectedItem === null\n            ? ''\n            : inputText\n                ? inputText(getChoiceText(selectedItem).props.record)\n                : getChoiceText(selectedItem));\n    }, [\n        input.value,\n        handleFilterChange,\n        selectedItem,\n        getChoiceText,\n        inputText,\n    ]);\n    var handleChange = useCallback(function (item) {\n        if (getChoiceValue(item) == null && filterValue) {\n            setFilterValue('');\n        }\n        input.onChange(getChoiceValue(item));\n    }, [filterValue, getChoiceValue, input]);\n    // This function ensures that the suggestion list stay aligned to the\n    // input element even if it moves (because user scrolled for example)\n    var updateAnchorEl = function () {\n        if (!inputEl.current) {\n            return;\n        }\n        var inputPosition = inputEl.current.getBoundingClientRect();\n        // It works by implementing a mock element providing the only method used\n        // by the PopOver component, getBoundingClientRect, which will return a\n        // position based on the input position\n        if (!anchorEl.current) {\n            anchorEl.current = { getBoundingClientRect: function () { return inputPosition; } };\n        }\n        else {\n            var anchorPosition = anchorEl.current.getBoundingClientRect();\n            if (anchorPosition.x !== inputPosition.x ||\n                anchorPosition.y !== inputPosition.y) {\n                anchorEl.current = {\n                    getBoundingClientRect: function () { return inputPosition; },\n                };\n            }\n        }\n    };\n    var storeInputRef = function (input) {\n        inputEl.current = input;\n        updateAnchorEl();\n    };\n    var handleBlur = useCallback(function (event) {\n        handleFilterChange('');\n        // If we had a value before, set the filter back to its text so that\n        // Downshift displays it correctly\n        setFilterValue(input.value\n            ? inputText\n                ? inputText(getChoiceText(selectedItem).props.record)\n                : getChoiceText(selectedItem)\n            : '');\n        input.onBlur(event);\n    }, [getChoiceText, handleFilterChange, input, inputText, selectedItem]);\n    var handleFocus = useCallback(function (openMenu) { return function (event) {\n        openMenu(event);\n        input.onFocus(event);\n    }; }, [input]);\n    var shouldRenderSuggestions = function (val) {\n        if (shouldRenderSuggestionsOverride !== undefined &&\n            typeof shouldRenderSuggestionsOverride === 'function') {\n            return shouldRenderSuggestionsOverride(val);\n        }\n        return true;\n    };\n    var _o = InputProps || {}, endAdornment = _o.endAdornment, InputPropsWithoutEndAdornment = __rest(_o, [\"endAdornment\"]);\n    var handleClickClearButton = useCallback(function (openMenu) { return function (event) {\n        event.stopPropagation();\n        setFilterValue('');\n        input.onChange('');\n        openMenu(event);\n        input.onFocus(event);\n    }; }, [input]);\n    var getEndAdornment = function (openMenu) {\n        var _a;\n        if (!resettable) {\n            if (endAdornment) {\n                return endAdornment;\n            }\n            if (loading) {\n                return React.createElement(AutocompleteInputLoader, null);\n            }\n        }\n        else if (!filterValue) {\n            var label_1 = translate('ra.action.clear_input_value');\n            if (clearAlwaysVisible) {\n                // show clear button, inactive\n                return (React.createElement(InputAdornment, { position: \"end\" },\n                    React.createElement(IconButton, { className: classes.clearButton, \"aria-label\": label_1, title: label_1, disableRipple: true, disabled: true },\n                        React.createElement(ClearIcon, { className: classNames(classes.clearIcon, classes.visibleClearIcon) })),\n                    loading && React.createElement(AutocompleteInputLoader, null)));\n            }\n            else {\n                if (endAdornment) {\n                    return endAdornment;\n                }\n                else {\n                    // show spacer\n                    return (React.createElement(InputAdornment, { position: \"end\" },\n                        React.createElement(\"span\", { className: classes.clearButton }, \"\\u00A0\"),\n                        loading && React.createElement(AutocompleteInputLoader, null)));\n                }\n            }\n        }\n        else {\n            // show clear\n            var label_2 = translate('ra.action.clear_input_value');\n            return (React.createElement(InputAdornment, { position: \"end\" },\n                React.createElement(IconButton, { className: classes.clearButton, \"aria-label\": label_2, title: label_2, disableRipple: true, onClick: handleClickClearButton(openMenu), onMouseDown: handleMouseDownClearButton, disabled: disabled },\n                    React.createElement(ClearIcon, { className: classNames(classes.clearIcon, (_a = {},\n                            _a[classes.visibleClearIcon] = clearAlwaysVisible || filterValue,\n                            _a)) })),\n                loading && React.createElement(AutocompleteInputLoader, null)));\n        }\n    };\n    return (React.createElement(Downshift, __assign({ inputValue: filterValue, onChange: handleChange, selectedItem: selectedItem, itemToString: function (item) { return getChoiceValue(item); } }, rest), function (_a) {\n        var getInputProps = _a.getInputProps, getItemProps = _a.getItemProps, getLabelProps = _a.getLabelProps, getMenuProps = _a.getMenuProps, isOpen = _a.isOpen, highlightedIndex = _a.highlightedIndex, openMenu = _a.openMenu;\n        var isMenuOpen = isOpen && shouldRenderSuggestions(filterValue);\n        var _b = getInputProps(__assign({ onBlur: handleBlur, onFocus: handleFocus(openMenu) }, InputProps)), downshiftId = _b.id, // We want to ignore this to correctly link our label and the input\n        value = _b.value, onBlur = _b.onBlur, onChange = _b.onChange, onFocus = _b.onFocus, ref = _b.ref, size = _b.size, color = _b.color, inputProps = __rest(_b, [\"id\", \"value\", \"onBlur\", \"onChange\", \"onFocus\", \"ref\", \"size\", \"color\"]);\n        var suggestions = getSuggestions(filterValue);\n        return (React.createElement(\"div\", { className: classes.container },\n            React.createElement(TextField, __assign({ id: id, name: input.name, InputProps: __assign({ inputRef: storeInputRef, endAdornment: getEndAdornment(openMenu), onBlur: onBlur, onChange: function (event) {\n                        handleFilterChange(event);\n                        setFilterValue(event.target.value);\n                        onChange(event);\n                    }, onFocus: onFocus }, InputPropsWithoutEndAdornment), error: !!(touched && (error || submitError)), label: React.createElement(FieldTitle, __assign({ label: label }, labelProps, { source: source, resource: resource, isRequired: typeof isRequiredOverride !==\n                        'undefined'\n                        ? isRequiredOverride\n                        : isRequired })), InputLabelProps: getLabelProps({\n                    htmlFor: id,\n                }), helperText: React.createElement(InputHelperText, { touched: touched, error: error || submitError, helperText: helperText }), disabled: disabled, variant: variant, margin: margin, fullWidth: fullWidth, value: filterValue, className: className, size: size, color: color }, inputProps, options)),\n            React.createElement(AutocompleteSuggestionList, { isOpen: isMenuOpen, menuProps: getMenuProps({}, \n                // https://github.com/downshift-js/downshift/issues/235\n                { suppressRefError: true }), inputEl: inputEl.current, suggestionsContainerProps: suggestionsContainerProps, className: classes.suggestionsContainer }, suggestions.map(function (suggestion, index) { return (React.createElement(AutocompleteSuggestionItem, __assign({ key: getChoiceValue(suggestion), suggestion: suggestion, index: index, highlightedIndex: highlightedIndex, isSelected: input.value ===\n                    getChoiceValue(suggestion), filterValue: filterValue, getSuggestionText: getChoiceText }, getItemProps({\n                item: suggestion,\n            })))); }))));\n    }));\n};\nvar handleMouseDownClearButton = function (event) {\n    event.preventDefault();\n};\nvar useStyles = makeStyles(function (theme) { return ({\n    container: {\n        flexGrow: 1,\n        position: 'relative',\n    },\n    clearIcon: {\n        height: 16,\n        width: 0,\n    },\n    visibleClearIcon: {\n        width: 16,\n    },\n    clearButton: {\n        height: 24,\n        width: 24,\n        padding: 0,\n    },\n    selectAdornment: {\n        position: 'absolute',\n        right: 24,\n    },\n    inputAdornedEnd: {\n        paddingRight: 0,\n    },\n    suggestionsContainer: {\n        zIndex: theme.zIndex.modal,\n    },\n}); }, { name: 'RaAutocompleteInput' });\nexport default AutocompleteInput;\n"]},"metadata":{},"sourceType":"module"}