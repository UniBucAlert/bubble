{"ast":null,"code":"import { useNotify, useRedirect, useRefresh, useUnselectAll } from '../sideEffect';\nimport { useMemo } from 'react';\nvar defaultSideEffects = {\n  onSuccess: undefined,\n  onFailure: undefined\n};\n\nvar useDeclarativeSideEffects = function () {\n  var notify = useNotify();\n  var redirect = useRedirect();\n  var refresh = useRefresh();\n  var unselectAll = useUnselectAll();\n  return useMemo(function () {\n    return function (resource, _a) {\n      var _b = _a === void 0 ? defaultSideEffects : _a,\n          onSuccess = _b.onSuccess,\n          onFailure = _b.onFailure;\n\n      var convertToFunctionSideEffect = function (resource, sideEffects) {\n        if (!sideEffects || typeof sideEffects === 'function') {\n          return sideEffects;\n        }\n\n        if (Object.keys(sideEffects).length === 0) {\n          return undefined;\n        }\n\n        var notification = sideEffects.notification,\n            redirectTo = sideEffects.redirectTo,\n            needRefresh = sideEffects.refresh,\n            needUnselectAll = sideEffects.unselectAll;\n        return function () {\n          if (notification) {\n            notify(notification.body, notification.level, notification.messageArgs);\n          }\n\n          if (redirectTo) {\n            redirect(redirectTo);\n          }\n\n          if (needRefresh) {\n            refresh();\n          }\n\n          if (needUnselectAll) {\n            unselectAll(resource);\n          }\n        };\n      };\n\n      return {\n        onSuccess: convertToFunctionSideEffect(resource, onSuccess),\n        onFailure: convertToFunctionSideEffect(resource, onFailure)\n      };\n    };\n  }, [notify, redirect, refresh, unselectAll]);\n};\n\nexport default useDeclarativeSideEffects;","map":{"version":3,"sources":["/node_modules/ra-core/esm/dataProvider/useDeclarativeSideEffects.js"],"names":["useNotify","useRedirect","useRefresh","useUnselectAll","useMemo","defaultSideEffects","onSuccess","undefined","onFailure","useDeclarativeSideEffects","notify","redirect","refresh","unselectAll","resource","_a","_b","convertToFunctionSideEffect","sideEffects","Object","keys","length","notification","redirectTo","needRefresh","needUnselectAll","body","level","messageArgs"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,WAApB,EAAiCC,UAAjC,EAA6CC,cAA7C,QAAoE,eAApE;AACA,SAASC,OAAT,QAAwB,OAAxB;AACA,IAAIC,kBAAkB,GAAG;AACrBC,EAAAA,SAAS,EAAEC,SADU;AAErBC,EAAAA,SAAS,EAAED;AAFU,CAAzB;;AAIA,IAAIE,yBAAyB,GAAG,YAAY;AACxC,MAAIC,MAAM,GAAGV,SAAS,EAAtB;AACA,MAAIW,QAAQ,GAAGV,WAAW,EAA1B;AACA,MAAIW,OAAO,GAAGV,UAAU,EAAxB;AACA,MAAIW,WAAW,GAAGV,cAAc,EAAhC;AACA,SAAOC,OAAO,CAAC,YAAY;AAAE,WAAO,UAAUU,QAAV,EAAoBC,EAApB,EAAwB;AACxD,UAAIC,EAAE,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgBV,kBAAhB,GAAqCU,EAA9C;AAAA,UAAkDT,SAAS,GAAGU,EAAE,CAACV,SAAjE;AAAA,UAA4EE,SAAS,GAAGQ,EAAE,CAACR,SAA3F;;AACA,UAAIS,2BAA2B,GAAG,UAAUH,QAAV,EAAoBI,WAApB,EAAiC;AAC/D,YAAI,CAACA,WAAD,IAAgB,OAAOA,WAAP,KAAuB,UAA3C,EAAuD;AACnD,iBAAOA,WAAP;AACH;;AACD,YAAIC,MAAM,CAACC,IAAP,CAAYF,WAAZ,EAAyBG,MAAzB,KAAoC,CAAxC,EAA2C;AACvC,iBAAOd,SAAP;AACH;;AACD,YAAIe,YAAY,GAAGJ,WAAW,CAACI,YAA/B;AAAA,YAA6CC,UAAU,GAAGL,WAAW,CAACK,UAAtE;AAAA,YAAkFC,WAAW,GAAGN,WAAW,CAACN,OAA5G;AAAA,YAAqHa,eAAe,GAAGP,WAAW,CAACL,WAAnJ;AACA,eAAO,YAAY;AACf,cAAIS,YAAJ,EAAkB;AACdZ,YAAAA,MAAM,CAACY,YAAY,CAACI,IAAd,EAAoBJ,YAAY,CAACK,KAAjC,EAAwCL,YAAY,CAACM,WAArD,CAAN;AACH;;AACD,cAAIL,UAAJ,EAAgB;AACZZ,YAAAA,QAAQ,CAACY,UAAD,CAAR;AACH;;AACD,cAAIC,WAAJ,EAAiB;AACbZ,YAAAA,OAAO;AACV;;AACD,cAAIa,eAAJ,EAAqB;AACjBZ,YAAAA,WAAW,CAACC,QAAD,CAAX;AACH;AACJ,SAbD;AAcH,OAtBD;;AAuBA,aAAO;AACHR,QAAAA,SAAS,EAAEW,2BAA2B,CAACH,QAAD,EAAWR,SAAX,CADnC;AAEHE,QAAAA,SAAS,EAAES,2BAA2B,CAACH,QAAD,EAAWN,SAAX;AAFnC,OAAP;AAIH,KA7B4B;AA6BzB,GA7BU,EA6BR,CAACE,MAAD,EAASC,QAAT,EAAmBC,OAAnB,EAA4BC,WAA5B,CA7BQ,CAAd;AA8BH,CAnCD;;AAoCA,eAAeJ,yBAAf","sourcesContent":["import { useNotify, useRedirect, useRefresh, useUnselectAll, } from '../sideEffect';\nimport { useMemo } from 'react';\nvar defaultSideEffects = {\n    onSuccess: undefined,\n    onFailure: undefined,\n};\nvar useDeclarativeSideEffects = function () {\n    var notify = useNotify();\n    var redirect = useRedirect();\n    var refresh = useRefresh();\n    var unselectAll = useUnselectAll();\n    return useMemo(function () { return function (resource, _a) {\n        var _b = _a === void 0 ? defaultSideEffects : _a, onSuccess = _b.onSuccess, onFailure = _b.onFailure;\n        var convertToFunctionSideEffect = function (resource, sideEffects) {\n            if (!sideEffects || typeof sideEffects === 'function') {\n                return sideEffects;\n            }\n            if (Object.keys(sideEffects).length === 0) {\n                return undefined;\n            }\n            var notification = sideEffects.notification, redirectTo = sideEffects.redirectTo, needRefresh = sideEffects.refresh, needUnselectAll = sideEffects.unselectAll;\n            return function () {\n                if (notification) {\n                    notify(notification.body, notification.level, notification.messageArgs);\n                }\n                if (redirectTo) {\n                    redirect(redirectTo);\n                }\n                if (needRefresh) {\n                    refresh();\n                }\n                if (needUnselectAll) {\n                    unselectAll(resource);\n                }\n            };\n        };\n        return {\n            onSuccess: convertToFunctionSideEffect(resource, onSuccess),\n            onFailure: convertToFunctionSideEffect(resource, onFailure),\n        };\n    }; }, [notify, redirect, refresh, unselectAll]);\n};\nexport default useDeclarativeSideEffects;\n"]},"metadata":{},"sourceType":"module"}