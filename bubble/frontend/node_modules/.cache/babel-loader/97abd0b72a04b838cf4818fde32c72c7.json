{"ast":null,"code":"import * as React from 'react';\nimport { createContext, useContext, useMemo } from 'react';\nimport pick from 'lodash/pick';\nexport var SaveContext = createContext(undefined);\nexport var SaveContextProvider = function (_a) {\n  var children = _a.children,\n      value = _a.value;\n  return React.createElement(SaveContext.Provider, {\n    value: value\n  }, children);\n};\n/**\n * Get the save() function and its status\n *\n * Used in forms.\n *\n * @example\n *\n * const {\n *     save,\n *     saving\n * } = useSaveContext();\n */\n\nexport var useSaveContext = function (props) {\n  var context = useContext(SaveContext);\n\n  if (!context || !context.save || !context.setOnFailure) {\n    /**\n     * The element isn't inside a <SaveContextProvider>\n     * To avoid breakage in that case, fallback to props\n     *\n     * @deprecated - to be removed in 4.0\n     */\n    if (process.env.NODE_ENV !== 'production') {\n      console.log(\"Edit or Create child components must be used inside a <SaveContextProvider>. Relying on props rather than context to get persistence related data and callbacks is deprecated and won't be supported in the next major version of react-admin.\");\n    }\n\n    return props;\n  }\n\n  return context;\n};\nexport var usePickSaveContext = function (context) {\n  var value = useMemo(function () {\n    return pick(context, ['save', 'saving', 'setOnFailure', 'setOnSuccess', 'setTransform', 'onSuccessRef', 'onFailureRef', 'transformRef']);\n  },\n  /* eslint-disable react-hooks/exhaustive-deps */\n  [context.save, context.saving, context.setOnFailure, context.setOnSuccess, context.setTransform, context.setTransform, context.onFailureRef, context.onSuccessRef, context.transformRef]\n  /* eslint-enable react-hooks/exhaustive-deps */\n  );\n  return value;\n};","map":{"version":3,"sources":["/node_modules/ra-core/esm/controller/details/SaveContext.js"],"names":["React","createContext","useContext","useMemo","pick","SaveContext","undefined","SaveContextProvider","_a","children","value","createElement","Provider","useSaveContext","props","context","save","setOnFailure","process","env","NODE_ENV","console","log","usePickSaveContext","saving","setOnSuccess","setTransform","onFailureRef","onSuccessRef","transformRef"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,aAAT,EAAwBC,UAAxB,EAAoCC,OAApC,QAAmD,OAAnD;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAO,IAAIC,WAAW,GAAGJ,aAAa,CAACK,SAAD,CAA/B;AACP,OAAO,IAAIC,mBAAmB,GAAG,UAAUC,EAAV,EAAc;AAC3C,MAAIC,QAAQ,GAAGD,EAAE,CAACC,QAAlB;AAAA,MAA4BC,KAAK,GAAGF,EAAE,CAACE,KAAvC;AACA,SAAQV,KAAK,CAACW,aAAN,CAAoBN,WAAW,CAACO,QAAhC,EAA0C;AAAEF,IAAAA,KAAK,EAAEA;AAAT,GAA1C,EAA4DD,QAA5D,CAAR;AACH,CAHM;AAIP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,IAAII,cAAc,GAAG,UAAUC,KAAV,EAAiB;AACzC,MAAIC,OAAO,GAAGb,UAAU,CAACG,WAAD,CAAxB;;AACA,MAAI,CAACU,OAAD,IAAY,CAACA,OAAO,CAACC,IAArB,IAA6B,CAACD,OAAO,CAACE,YAA1C,EAAwD;AACpD;AACR;AACA;AACA;AACA;AACA;AACQ,QAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACvCC,MAAAA,OAAO,CAACC,GAAR,CAAY,gPAAZ;AACH;;AACD,WAAOR,KAAP;AACH;;AACD,SAAOC,OAAP;AACH,CAfM;AAgBP,OAAO,IAAIQ,kBAAkB,GAAG,UAAUR,OAAV,EAAmB;AAC/C,MAAIL,KAAK,GAAGP,OAAO,CAAC,YAAY;AAC5B,WAAOC,IAAI,CAACW,OAAD,EAAU,CACjB,MADiB,EAEjB,QAFiB,EAGjB,cAHiB,EAIjB,cAJiB,EAKjB,cALiB,EAMjB,cANiB,EAOjB,cAPiB,EAQjB,cARiB,CAAV,CAAX;AAUH,GAXkB;AAYnB;AACA,GACIA,OAAO,CAACC,IADZ,EAEID,OAAO,CAACS,MAFZ,EAGIT,OAAO,CAACE,YAHZ,EAIIF,OAAO,CAACU,YAJZ,EAKIV,OAAO,CAACW,YALZ,EAMIX,OAAO,CAACW,YANZ,EAOIX,OAAO,CAACY,YAPZ,EAQIZ,OAAO,CAACa,YARZ,EASIb,OAAO,CAACc,YATZ;AAWA;AAxBmB,GAAnB;AA0BA,SAAOnB,KAAP;AACH,CA5BM","sourcesContent":["import * as React from 'react';\nimport { createContext, useContext, useMemo } from 'react';\nimport pick from 'lodash/pick';\nexport var SaveContext = createContext(undefined);\nexport var SaveContextProvider = function (_a) {\n    var children = _a.children, value = _a.value;\n    return (React.createElement(SaveContext.Provider, { value: value }, children));\n};\n/**\n * Get the save() function and its status\n *\n * Used in forms.\n *\n * @example\n *\n * const {\n *     save,\n *     saving\n * } = useSaveContext();\n */\nexport var useSaveContext = function (props) {\n    var context = useContext(SaveContext);\n    if (!context || !context.save || !context.setOnFailure) {\n        /**\n         * The element isn't inside a <SaveContextProvider>\n         * To avoid breakage in that case, fallback to props\n         *\n         * @deprecated - to be removed in 4.0\n         */\n        if (process.env.NODE_ENV !== 'production') {\n            console.log(\"Edit or Create child components must be used inside a <SaveContextProvider>. Relying on props rather than context to get persistence related data and callbacks is deprecated and won't be supported in the next major version of react-admin.\");\n        }\n        return props;\n    }\n    return context;\n};\nexport var usePickSaveContext = function (context) {\n    var value = useMemo(function () {\n        return pick(context, [\n            'save',\n            'saving',\n            'setOnFailure',\n            'setOnSuccess',\n            'setTransform',\n            'onSuccessRef',\n            'onFailureRef',\n            'transformRef',\n        ]);\n    }, \n    /* eslint-disable react-hooks/exhaustive-deps */\n    [\n        context.save,\n        context.saving,\n        context.setOnFailure,\n        context.setOnSuccess,\n        context.setTransform,\n        context.setTransform,\n        context.onFailureRef,\n        context.onSuccessRef,\n        context.transformRef,\n    ]\n    /* eslint-enable react-hooks/exhaustive-deps */\n    );\n    return value;\n};\n"]},"metadata":{},"sourceType":"module"}