{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport { useState, useCallback, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ContentFilter from '@material-ui/icons/FilterList';\nimport classnames from 'classnames';\nimport lodashGet from 'lodash/get';\nimport { useListContext, useResourceContext } from 'ra-core';\nimport { FilterButtonMenuItem } from './FilterButtonMenuItem';\nimport Button from '../../button/Button';\nvar useStyles = makeStyles({\n  root: {\n    display: 'inline-block'\n  }\n}, {\n  name: 'RaFilterButton'\n});\n\nvar FilterButton = function (props) {\n  var filters = props.filters,\n      classesOverride = props.classes,\n      className = props.className,\n      rest = __rest(props, [\"filters\", \"classes\", \"className\"]);\n\n  var resource = useResourceContext(props);\n\n  var _a = useListContext(props),\n      _b = _a.displayedFilters,\n      displayedFilters = _b === void 0 ? {} : _b,\n      filterValues = _a.filterValues,\n      showFilter = _a.showFilter;\n\n  var _c = useState(false),\n      open = _c[0],\n      setOpen = _c[1];\n\n  var anchorEl = useRef();\n  var classes = useStyles(props);\n  var hiddenFilters = filters.filter(function (filterElement) {\n    return !filterElement.props.alwaysOn && !displayedFilters[filterElement.props.source] && typeof lodashGet(filterValues, filterElement.props.source) === 'undefined';\n  });\n  var handleClickButton = useCallback(function (event) {\n    // This prevents ghost click.\n    event.preventDefault();\n    setOpen(true);\n    anchorEl.current = event.currentTarget;\n  }, [anchorEl, setOpen]);\n  var handleRequestClose = useCallback(function () {\n    setOpen(false);\n  }, [setOpen]);\n  var handleShow = useCallback(function (_a) {\n    var source = _a.source,\n        defaultValue = _a.defaultValue;\n    showFilter(source, defaultValue);\n    setOpen(false);\n  }, [showFilter, setOpen]);\n  if (hiddenFilters.length === 0) return null;\n  return React.createElement(\"div\", __assign({\n    className: classnames(classes.root, className)\n  }, sanitizeRestProps(rest)), React.createElement(Button, {\n    className: \"add-filter\",\n    label: \"ra.action.add_filter\",\n    onClick: handleClickButton\n  }, React.createElement(ContentFilter, null)), React.createElement(Menu, {\n    open: open,\n    anchorEl: anchorEl.current,\n    onClose: handleRequestClose\n  }, hiddenFilters.map(function (filterElement) {\n    return React.createElement(FilterButtonMenuItem, {\n      key: filterElement.props.source,\n      filter: filterElement,\n      resource: resource,\n      onShow: handleShow\n    });\n  })));\n};\n\nvar sanitizeRestProps = function (_a) {\n  var displayedFilters = _a.displayedFilters,\n      filterValues = _a.filterValues,\n      showFilter = _a.showFilter,\n      rest = __rest(_a, [\"displayedFilters\", \"filterValues\", \"showFilter\"]);\n\n  return rest;\n};\n\nFilterButton.propTypes = {\n  resource: PropTypes.string,\n  filters: PropTypes.arrayOf(PropTypes.node).isRequired,\n  displayedFilters: PropTypes.object,\n  filterValues: PropTypes.object.isRequired,\n  showFilter: PropTypes.func.isRequired,\n  classes: PropTypes.object,\n  className: PropTypes.string\n};\nexport default FilterButton;","map":{"version":3,"sources":["/node_modules/ra-ui-materialui/esm/list/filter/FilterButton.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","React","useState","useCallback","useRef","PropTypes","Menu","makeStyles","ContentFilter","classnames","lodashGet","useListContext","useResourceContext","FilterButtonMenuItem","Button","useStyles","root","display","name","FilterButton","props","filters","classesOverride","classes","className","rest","resource","_a","_b","displayedFilters","filterValues","showFilter","_c","open","setOpen","anchorEl","hiddenFilters","filter","filterElement","alwaysOn","source","handleClickButton","event","preventDefault","current","currentTarget","handleRequestClose","handleShow","defaultValue","createElement","sanitizeRestProps","label","onClick","onClose","map","key","onShow","propTypes","string","arrayOf","node","isRequired","object","func"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport { useState, useCallback, useRef, } from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ContentFilter from '@material-ui/icons/FilterList';\nimport classnames from 'classnames';\nimport lodashGet from 'lodash/get';\nimport { useListContext, useResourceContext } from 'ra-core';\nimport { FilterButtonMenuItem } from './FilterButtonMenuItem';\nimport Button from '../../button/Button';\nvar useStyles = makeStyles({\n    root: { display: 'inline-block' },\n}, { name: 'RaFilterButton' });\nvar FilterButton = function (props) {\n    var filters = props.filters, classesOverride = props.classes, className = props.className, rest = __rest(props, [\"filters\", \"classes\", \"className\"]);\n    var resource = useResourceContext(props);\n    var _a = useListContext(props), _b = _a.displayedFilters, displayedFilters = _b === void 0 ? {} : _b, filterValues = _a.filterValues, showFilter = _a.showFilter;\n    var _c = useState(false), open = _c[0], setOpen = _c[1];\n    var anchorEl = useRef();\n    var classes = useStyles(props);\n    var hiddenFilters = filters.filter(function (filterElement) {\n        return !filterElement.props.alwaysOn &&\n            !displayedFilters[filterElement.props.source] &&\n            typeof lodashGet(filterValues, filterElement.props.source) ===\n                'undefined';\n    });\n    var handleClickButton = useCallback(function (event) {\n        // This prevents ghost click.\n        event.preventDefault();\n        setOpen(true);\n        anchorEl.current = event.currentTarget;\n    }, [anchorEl, setOpen]);\n    var handleRequestClose = useCallback(function () {\n        setOpen(false);\n    }, [setOpen]);\n    var handleShow = useCallback(function (_a) {\n        var source = _a.source, defaultValue = _a.defaultValue;\n        showFilter(source, defaultValue);\n        setOpen(false);\n    }, [showFilter, setOpen]);\n    if (hiddenFilters.length === 0)\n        return null;\n    return (React.createElement(\"div\", __assign({ className: classnames(classes.root, className) }, sanitizeRestProps(rest)),\n        React.createElement(Button, { className: \"add-filter\", label: \"ra.action.add_filter\", onClick: handleClickButton },\n            React.createElement(ContentFilter, null)),\n        React.createElement(Menu, { open: open, anchorEl: anchorEl.current, onClose: handleRequestClose }, hiddenFilters.map(function (filterElement) { return (React.createElement(FilterButtonMenuItem, { key: filterElement.props.source, filter: filterElement, resource: resource, onShow: handleShow })); }))));\n};\nvar sanitizeRestProps = function (_a) {\n    var displayedFilters = _a.displayedFilters, filterValues = _a.filterValues, showFilter = _a.showFilter, rest = __rest(_a, [\"displayedFilters\", \"filterValues\", \"showFilter\"]);\n    return rest;\n};\nFilterButton.propTypes = {\n    resource: PropTypes.string,\n    filters: PropTypes.arrayOf(PropTypes.node).isRequired,\n    displayedFilters: PropTypes.object,\n    filterValues: PropTypes.object.isRequired,\n    showFilter: PropTypes.func.isRequired,\n    classes: PropTypes.object,\n    className: PropTypes.string,\n};\nexport default FilterButton;\n"]},"metadata":{},"sourceType":"module"}